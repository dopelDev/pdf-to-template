{% extends "report.html" %}

{% block content %}
{{ super() }}  <!-- Esto incluirá todo el contenido del bloque 'content' de 'report.html' -->

<!-- Iterar sobre cada grupo -->
{% for group in duplicate_names %}
<div>
    <!-- Título de la sección con el nombre de la familia -->
    <h2>{{ group[0]['Name'] }} - Family Report</h2>

    <!-- Crear una tabla para esta familia con el mismo estilo -->
    <table>
        <thead>
            <tr>
                <th></th> <!-- Blank cell for Master Employee List Label -->
                <th colspan="3">2020 Q1 (Mar 14-30)</th>
                <th colspan="3">2020 Q2</th>
                <th colspan="3">2020 Q3</th>
                <th colspan="3">2020 Q4</th>
                <th colspan="3">2021 Q1</th>
                <th colspan="3">2021 Q2</th>
                <th colspan="3">2021 Q3</th>
                <th>Total</th>
            </tr>
            <tr>
                <!-- Subcabezales si son necesarios, ajustar según sea necesario -->
                <th>Name</th>
                {% for _ in range(7) %}
                <th>Total Wage</th>
                <th>Qualified Wage</th>
                <th>ERC Credit</th>
                {% endfor %}
                <th></th> <!-- Espacio para la columna 'Total' si es necesario -->
            </tr>
        </thead>
        <tbody>
            <!-- Iterar sobre los miembros de la familia, comenzando desde el índice 1 para omitir el diccionario del nombre de la familia -->
            {% for member in group[1:] %}
            <tr>
                <td>{{ member['text'] }}</td>
                <!-- Iterar sobre cada columna de datos desde 1 hasta 22 y luego la columna 'Total' -->
                {% for i in range(1, 23) %}
                <td>{{ member['column' ~ i] }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endfor %}

{% endblock %}

